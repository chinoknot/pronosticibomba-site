<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>PB Analyzer</title>
  <style>
    :root{
      --bg0:#07101e;
      --bg1:#0a1628;
      --card:#0b1a2f;
      --txt:#e9f0ff;
      --muted:#a9b7d6;
      --line:rgba(255,255,255,.08);
      --accent:#3aa0ff;
      --accent2:#22c55e;
      --warn:#f59e0b;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:var(--sans);
      color:var(--txt);
      background: radial-gradient(1200px 700px at 20% 10%, #0d2b4f 0%, transparent 60%),
                  radial-gradient(900px 650px at 85% 20%, #0b3a2f 0%, transparent 55%),
                  linear-gradient(180deg, var(--bg0), var(--bg1));
      min-height:100vh;
    }
    header{
      padding:22px 22px 12px;
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      gap:14px;
    }
    .brand{font-size:20px;font-weight:700;letter-spacing:.2px;}
    .sub{margin-top:4px;color:var(--muted);font-size:12px;}
    .status{font-size:12px;color:var(--muted);display:flex;gap:10px;align-items:center;white-space:nowrap;}
    .pillHdr{padding:6px 10px;border:1px solid var(--line);background:rgba(255,255,255,.03);border-radius:999px;display:inline-flex;gap:8px;align-items:center;}
    .dot{width:8px;height:8px;border-radius:50%;background:var(--warn)}
    .dot.ok{background:var(--accent2)}
    main{padding:0 22px 24px;}
    .grid{display:grid;grid-template-columns: 380px 1fr;gap:14px;}
    @media (max-width: 980px){.grid{grid-template-columns:1fr}}
    .card{
      background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      border:1px solid var(--line);
      border-radius:16px;
      box-shadow: 0 8px 30px rgba(0,0,0,.25);
      overflow:hidden;
    }
    .card h3{
      margin:0;padding:14px 14px 10px;border-bottom:1px solid var(--line);
      background:rgba(0,0,0,.08);font-size:13px;letter-spacing:.2px;font-weight:700;
    }
    .card .body{padding:14px;}
    .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    label{font-size:12px;color:var(--muted)}
    input[type="date"], input[type="text"]{
      padding:10px 10px;border-radius:12px;border:1px solid var(--line);
      background:rgba(0,0,0,.18);color:var(--txt);outline:none;
    }
    input[type="text"]{width:100%}
    .btn{
      padding:10px 14px;border-radius:12px;border:1px solid var(--line);
      background:rgba(255,255,255,.06);color:var(--txt);cursor:pointer;font-weight:600;
    }
    .btn.primary{border-color:rgba(58,160,255,.35);background:rgba(58,160,255,.16);}
    .btn:disabled{opacity:.5;cursor:not-allowed}
    .leagues{display:flex;flex-wrap:wrap;gap:10px;margin-top:8px;}
    .chk{display:flex;align-items:center;gap:8px;padding:8px 10px;border-radius:999px;border:1px solid var(--line);background:rgba(0,0,0,.12);user-select:none;}
    .chk input{accent-color:var(--accent)}
    .note{margin-top:10px;color:var(--muted);font-size:12px}
    .list{margin-top:12px;display:flex;flex-direction:column;gap:10px;max-height:420px;overflow:auto;padding-right:4px;}
    .item{padding:12px;border:1px solid var(--line);background:rgba(0,0,0,.14);border-radius:14px;cursor:pointer;}
    .item:hover{border-color:rgba(58,160,255,.35)}
    .item.active{border-color:rgba(58,160,255,.55); background:rgba(58,160,255,.10)}
    .item .top{display:flex;justify-content:space-between;color:var(--muted);font-size:11px;gap:10px;}
    .item .mid{margin-top:6px;font-size:14px;font-weight:800;letter-spacing:.2px;}
    .kvSel{display:grid;grid-template-columns: 140px 1fr;gap:10px;margin:0;}
    .kvSel div{padding:10px 12px;border:1px solid var(--line);background:rgba(0,0,0,.12);border-radius:12px;font-size:12px;}
    .k{color:var(--muted)}
    .v{font-family:var(--mono);font-size:12px}
    .muted{color:var(--muted)}
    .box{padding:12px;border:1px solid var(--line);background:rgba(0,0,0,.12);border-radius:12px;}
    pre{margin:0;white-space:pre-wrap;word-break:break-word;font-family:var(--mono);font-size:12px;color:#dbe6ff;}
    .split{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:12px;}
    @media (max-width:980px){.split{grid-template-columns:1fr}}
    .badge{display:inline-flex;gap:8px;align-items:center;padding:6px 10px;border-radius:999px;border:1px solid var(--line);background:rgba(0,0,0,.12);font-size:12px;color:var(--muted);}
    .badge b{color:var(--txt)}
    footer{padding:12px 22px 22px;color:var(--muted);font-size:12px;}

    /* Pretty output */
    .hidden{ display:none; }
    .pretty{ margin-top:12px; }
    .prettyRow{ display:grid; grid-template-columns:1fr; gap:12px; margin-top:12px; }
    @media(min-width: 980px){ .prettyRow{ grid-template-columns: 1fr 1fr; } }
    .prettyCard{ background: rgba(0,0,0,0.18); border:1px solid rgba(255,255,255,0.08); border-radius:14px; padding:12px; }
    .prettyTitle{ font-weight:700; letter-spacing:.2px; margin-bottom:8px; opacity:.95; }
    .prettyBody{ font-size:13px; line-height:1.35; color: rgba(240,250,255,0.92); }
    .prettyBody.small{ font-size:12px; opacity:.9; }

    .pill{ display:inline-block; padding:6px 10px; border-radius:999px; margin:6px 6px 0 0; font-size:12px;
           border:1px solid rgba(255,255,255,0.12); background: rgba(0,0,0,0.18); }
    .pill.good{ border-color: rgba(60, 220, 130, 0.35); }
    .pill.warn{ border-color: rgba(255, 190, 60, 0.35); }
    .pill.bad{ border-color: rgba(255, 80, 80, 0.35); opacity:.75; }

    .kv2{ display:grid; grid-template-columns: 1fr auto; gap:8px 14px; margin-top:10px; }
    .kv2 .lbl{ opacity:.85; }
    .kv2 .val{ font-family: var(--mono); opacity:.95; }

    .hr{ height:1px; background: rgba(255,255,255,0.08); margin:10px 0; }
  </style>
</head>
<body>
<header>
  <div>
    <div class="brand">PB Analyzer</div>
    <div class="sub">Seleziona data e lega → scegli una partita → Analizza (goal/Poisson + esotiche: shots/corners/fouls/cards).</div>
  </div>
  <div class="status">
    <span class="pillHdr"><span id="dot" class="dot"></span><span id="backendTxt">Backend: ...</span></span>
    <span class="pillHdr">Fixture: <b id="fixtureCount">-</b></span>
  </div>
</header>

<main>
  <div class="grid">
    <section class="card">
      <h3>Fixture</h3>
      <div class="body">
        <div class="row" style="justify-content:space-between;align-items:flex-end;">
          <div style="flex:1;min-width:180px;">
            <label for="dateInp">Data</label><br/>
            <input id="dateInp" type="date" />
          </div>
          <button id="btnReload" class="btn primary">Ricarica</button>
        </div>

        <div style="margin-top:10px;">
          <label for="searchInp">Ricerca</label><br/>
          <input id="searchInp" type="text" placeholder="es: Juventus, Arsenal, Lazio..." />
        </div>

        <div style="margin-top:10px;">
          <label>Leghe (maggiori)</label>
          <div class="leagues">
            <label class="chk"><input type="checkbox" class="lg" value="135" checked /> Serie A</label>
            <label class="chk"><input type="checkbox" class="lg" value="39" checked /> Premier League</label>
            <label class="chk"><input type="checkbox" class="lg" value="140" checked /> La Liga</label>
            <label class="chk"><input type="checkbox" class="lg" value="78" checked /> Bundesliga</label>
            <label class="chk"><input type="checkbox" class="lg" value="61" checked /> Ligue 1</label>
          </div>
          <div class="note">Nota: qui lavoriamo solo sulle leghe maggiori. Minori le aggiungiamo dopo.</div>
        </div>

        <div class="note" style="margin-top:12px;">Mostrate <b id="shownCount">0</b> partite (filtrate).</div>
        <div id="fixturesList" class="list"></div>
      </div>
    </section>

    <section class="card">
      <h3>Match selezionato</h3>
      <div class="body">
        <div class="kvSel">
          <div class="k">Competizione</div><div class="v" id="selLeague">-</div>
          <div class="k">Kickoff (UTC)</div><div class="v" id="selKick">-</div>
          <div class="k">Match</div><div class="v" id="selMatch">-</div>
          <div class="k">Fixture ID</div><div class="v" id="selId">-</div>
        </div>

        <div class="row" style="justify-content:flex-end;margin-top:12px;">
          <button id="btnAnalyze" class="btn primary" disabled>Analizza (step 1)</button>
        </div>

        <div class="note">
          Endpoint usati:
          <span class="badge"><b>GET</b> /api/fixtures</span>
          <span class="badge"><b>POST</b> /api/analyze</span>
        </div>

        <div class="split">
          <div class="box">
            <div class="muted" style="margin-bottom:8px;"><b>Output analisi (raw)</b></div>
            <pre id="analyzeRaw">Seleziona una partita e premi Analizza.</pre>

            <div id="analyzePretty" class="pretty hidden">
              <div class="prettyRow">
                <div class="prettyCard">
                  <div class="prettyTitle">Goal (Poisson)</div>
                  <div id="goalSummary" class="prettyBody"></div>
                </div>
                <div class="prettyCard">
                  <div class="prettyTitle">Esotiche (shots/corners/cards/fouls)</div>
                  <div id="exoticTeam" class="prettyBody"></div>
                </div>
              </div>
              <div class="prettyRow">
                <div class="prettyCard">
                  <div class="prettyTitle">Player (se disponibili)</div>
                  <div id="exoticPlayers" class="prettyBody"></div>
                </div>
                <div class="prettyCard">
                  <div class="prettyTitle">Debug</div>
                  <div id="debugBox" class="prettyBody small"></div>
                </div>
              </div>
            </div>
          </div>

          <div class="box">
            <div class="muted" style="margin-bottom:8px;"><b>Note</b></div>
            <div class="muted" style="font-size:12px;line-height:1.35">
              - Le esotiche arrivano dal backend come <b>exotics.totals</b> e <b>exotics.teams</b>.
              <br/>- Le quote vengono ignorate per decidere “se mostrare” (le useremo dopo solo per costruire bet builder / fallback).
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>
</main>

<footer>
  Backend attuale: <span class="muted" id="backendUrlTxt"></span>
</footer>

<script>
(() => {
  const BACKEND = "https://pb-analyzer-backend2.vercel.app";

  const els = {
    dot: document.getElementById("dot"),
    backendTxt: document.getElementById("backendTxt"),
    backendUrlTxt: document.getElementById("backendUrlTxt"),
    fixtureCount: document.getElementById("fixtureCount"),
    shownCount: document.getElementById("shownCount"),
    dateInp: document.getElementById("dateInp"),
    searchInp: document.getElementById("searchInp"),
    btnReload: document.getElementById("btnReload"),
    fixturesList: document.getElementById("fixturesList"),
    selLeague: document.getElementById("selLeague"),
    selKick: document.getElementById("selKick"),
    selMatch: document.getElementById("selMatch"),
    selId: document.getElementById("selId"),
    btnAnalyze: document.getElementById("btnAnalyze"),
    analyzeRaw: document.getElementById("analyzeRaw"),
  };

  let allFixtures = [];
  let selected = null;

  function todayISO(){
    const d = new Date();
    const yyyy = d.getFullYear();
    const mm = String(d.getMonth()+1).padStart(2,"0");
    const dd = String(d.getDate()).padStart(2,"0");
    return `${yyyy}-${mm}-${dd}`;
  }

  function setBackendStatus(ok){
    els.dot.classList.toggle("ok", !!ok);
    els.backendTxt.textContent = ok ? "Backend: OK" : "Backend: KO";
    els.backendUrlTxt.textContent = BACKEND;
  }

  function ping(){
    els.backendBadge.textContent = `Backend: ${BACKEND.replace(/^https?:\/\//,'')}`;
    els.backendBadge.title = BACKEND;

    fetch(`${BACKEND}/api/health?cb=${Date.now()}`, { method:"GET" })
      .then(r=>{
        if(!r.ok) throw new Error(`health ${r.status}`);
        return r.json().catch(()=> ({}));
      })
      .then(j=>{
        els.backendBadge.classList.remove("warn");
        els.backendBadge.classList.add("ok");
        els.backendBadge.textContent = `Backend: OK`;
        if(j?.version) els.backendBadge.title = `OK - ${j.version}`;
      })
      .catch(_=>{
        els.backendBadge.classList.remove("ok");
        els.backendBadge.classList.add("warn");
        els.backendBadge.textContent = `Backend: OFF`;
      });
  }

  function getSelectedLeagueIds(){
    return Array.from(document.querySelectorAll("input.lg"))
      .filter(x => x.checked)
      .map(x => x.value);
  }

  function clearSelection(){
    selected = null;
    els.selLeague.textContent = "-";
    els.selKick.textContent = "-";
    els.selMatch.textContent = "-";
    els.selId.textContent = "-";
    els.btnAnalyze.disabled = true;
  }

  function setSelection(f){
    selected = f;
    els.selLeague.textContent = f.league || "-";
    els.selKick.textContent = String(f.kickoff_utc || "-").replace("T"," ").replace(":00+00:00"," UTC");
    els.selMatch.textContent = `${f.home} vs ${f.away}`;
    els.selId.textContent = String(f.fixture_id || "-");
    els.btnAnalyze.disabled = !f.fixture_id;
  }

  function escapeHtml(str){
    return String(str)
      .replaceAll("&","&amp;")
      .replaceAll("<","&lt;")
      .replaceAll(">","&gt;")
      .replaceAll('"',"&quot;")
      .replaceAll("'","&#039;");
  }

  function renderList(){
    const q = (els.searchInp.value || "").trim().toLowerCase();
    const allowed = new Set(getSelectedLeagueIds());

    const filtered = allFixtures.filter(f => {
      if (allowed.size && f.league_id && !allowed.has(String(f.league_id))) return false;
      if (!q) return true;
      const hay = `${f.home} ${f.away} ${f.league}`.toLowerCase();
      return hay.includes(q);
    });

    els.shownCount.textContent = String(filtered.length);
    els.fixturesList.innerHTML = "";

    filtered.forEach(f => {
      const div = document.createElement("div");
      div.className = "item" + (selected && selected.fixture_id === f.fixture_id ? " active" : "");
      const when = String(f.kickoff_utc || "").replace("T"," ").replace(":00+00:00"," UTC");
      div.innerHTML = `
        <div class="top">
          <span>${escapeHtml(f.league || "")}</span>
          <span>${escapeHtml(when)}</span>
        </div>
        <div class="mid">${escapeHtml(f.home || "")} vs ${escapeHtml(f.away || "")}</div>
      `;
      div.addEventListener("click", () => {
        setSelection(f);
        renderList();
      });
      els.fixturesList.appendChild(div);
    });

    if (filtered.length === 0){
      const empty = document.createElement("div");
      empty.className = "muted";
      empty.style.padding = "10px 2px";
      empty.textContent = "Nessuna partita trovata per questa data/filtri.";
      els.fixturesList.appendChild(empty);
    }
  }

  function loadFixtures(){
    clearSelection();
    els.fixturesList.innerHTML = `<div class="muted">Carico fixture...</div>`;
    els.fixtureCount.textContent = "-";
    els.shownCount.textContent = "0";

    const date = els.dateInp.value || todayISO();

    fetch(`${BACKEND}/api/fixtures?v=3&date=${encodeURIComponent(date)}&cb=${Date.now()}`, { method:"GET" })
      .then(res=>{
        if(!res.ok){
          return res.text().catch(()=> "").then(t=>{ throw new Error(`fixtures ${res.status} ${t}`); });
        }
        return res.json();
      })
      .then(j=>{
        allFixtures = (j?.fixtures || j?.response || []).map(x=>{
          // normalize to match our internal shape
          const fx = x?.fixture ? x : {
            fixture: { id: x?.fixture_id, date: x?.kickoff_utc },
            league: { id: x?.league_id, name: x?.league, season: x?.season },
            teams: { home: x?.home, away: x?.away }
          };
          return fx;
        });

        els.fixtureCount.textContent = String(allFixtures.length || 0);
        applyFilters();
      })
      .catch(err=>{
        console.error(err);
        els.fixturesList.innerHTML = `<div class="muted">Errore fixtures. Apri console.</div>`;
        els.fixtureCount.textContent = "0";
        els.shownCount.textContent = "0";
      });
  }

  function pct(x){ if (typeof x !== "number" || !isFinite(x)) return "n/d"; return (x*100).toFixed(1) + "%"; }
  function fmt(x, d=2){ if (typeof x !== "number" || !isFinite(x)) return "n/d"; return x.toFixed(d); }

  // --- Poisson helpers (Goal box) ---
  function poissonPMF(k, lambda){
    if (typeof lambda !== "number" || !isFinite(lambda) || lambda < 0) return 0;
    if (lambda === 0) return k === 0 ? 1 : 0;
    let p = Math.exp(-lambda);
    for (let i=1;i<=k;i++) p *= lambda / i;
    return p;
  }
  function poissonCDF(k, lambda){
    let s = 0;
    for (let i=0;i<=k;i++) s += poissonPMF(i, lambda);
    return Math.min(1, Math.max(0, s));
  }
  function poissonOver(lambdaTotal, line){
    if (typeof lambdaTotal !== "number" || !isFinite(lambdaTotal)) return null;
    const k = Math.floor(line);
    const p = 1 - poissonCDF(k, lambdaTotal);
    return Math.min(1, Math.max(0, p));
  }


  
  function fmtOdds(x, d=2){
    if (typeof x !== "number" || !isFinite(x)) return "n/d";
    return x.toFixed(d);
  }

  // helpers for bets UI
  function fmtPct(p){
    if (typeof p !== "number" || !isFinite(p)) return "n/d";
    return (p*100).toFixed(1) + "%";
  }

  function pill(text, kind=""){
    const cls = ("pill " + (kind||"")).trim();
    return `<span class="${cls}">${text}</span>`;
  }

  
  function renderBets(bets){
  // Returns HTML string (so template literals won't print "undefined")
  if(!bets) return "";

  function pillHTML(txt, cls){
    return `<span class="pill ${cls||""}">${escapeHtml(txt||"")}</span>`;
  }
  function fmtLine(v){ return (v===null || v===undefined) ? "n/d" : String(v); }

  function legLine(leg){
    const market = escapeHtml(leg?.market || "");
    const line = fmtLine(leg?.line);
    const note = leg?.note ? `<span class="muted2">${escapeHtml(leg.note)}</span>` : "";
    return `<div class="betRow"><div>${market}</div><div class="betVal">Over ${line} ${note}</div></div>`;
  }

  function block(titlePill, b){
    if(!b || !Array.isArray(b.legs) || !b.legs.length) return "";
    const name = escapeHtml(b.name || "");
    const target = escapeHtml(b.target_odds || "");
    const legs = b.legs.map(legLine).join("");
    return `
      <div class="betBlock">
        <div class="betHead">
          <div class="betTitle">${titlePill} <span class="muted2">${name}</span></div>
          <div class="muted2">quota stimata: <b>${target || "n/d"}</b></div>
        </div>
        <div class="betLegs">${legs}</div>
      </div>
    `;
  }

  const safe = block(pillHTML("SAFE", "ok"), bets.easy);
  const med  = block(pillHTML("BOOST", "warn"), bets.medium);
  const hard = block(pillHTML("BOMBA", "bad"), bets.hard);

  return `
    <div style="margin-top:10px" class="muted2">PB Tripla Builder (stimata)</div>
    ${safe}${med}${hard}
  `;
}




    function renderPlayerBlock(teamName, block){
      if (!block) return "";
      const topShots = block.topShots || [];
      const topSoT = block.topSoT || [];
      const topFouls = block.topFouls || [];
      const topCards = block.topCards || [];

      const row = (p, key) => {
        const name = p?.name || "Player";
        const pos = p?.position ? `(${p.position})` : "";
        const g = (typeof p?.games === "number") ? `g:${p.games}` : "";
        const v = (typeof p?.[key] === "number" && isFinite(p[key])) ? fmt(p[key],2) : "n/d";
        return `• ${escapeHtml(name)} ${escapeHtml(pos)} — ${key}: ${v} — ${escapeHtml(g)}`;
      };

      let html = `<div class="muted"><b>${escapeHtml(teamName)}</b></div>`;

      if (topShots.length){
        html += `<div style="margin-top:8px"><b>Top Shots</b><br/>${topShots.map(p=>row(p,"shots_per_game")).join("<br/>")}</div>`;
      }
      if (topSoT.length){
        html += `<div style="margin-top:8px"><b>Top SoT</b><br/>${topSoT.map(p=>row(p,"sot_per_game")).join("<br/>")}</div>`;
      }
      if (topFouls.length){
        html += `<div style="margin-top:8px"><b>Top Fouls</b><br/>${topFouls.map(p=>row(p,"fouls_per_game")).join("<br/>")}</div>`;
      }
      if (topCards.length){
        html += `<div style="margin-top:8px"><b>Top Cards</b><br/>${topCards.map(p=>row(p,"yellow_per_game")).join("<br/>")}</div>`;
      }

      return html;
    }

    let playersHtml = "";
    const anyPlayers =
      (ph?.topShots?.length || ph?.topSoT?.length || ph?.topFouls?.length || ph?.topCards?.length ||
       pa?.topShots?.length || pa?.topSoT?.length || pa?.topFouls?.length || pa?.topCards?.length);

    if (anyPlayers){
      playersHtml += renderPlayerBlock(homeName, ph);
      playersHtml += `<div class="hr"></div>`;
      playersHtml += renderPlayerBlock(awayName, pa);
    } else {
      playersHtml = `<div class="muted">Player props non disponibili per questa partita.</div>`;
    }
    playersBox.innerHTML = playersHtml;

    // ---- DEBUG ----
    if (debugBox){
      const v = data?.version || "-";
      const fid = data?.fixture?.fixture_id || selected?.fixture_id || "-";
      debugBox.innerHTML = `
        <div class="kv2">
          <div class="lbl">Version</div><div class="val">${escapeHtml(v)}</div>
          <div class="lbl">Fixture ID</div><div class="val">${escapeHtml(fid)}</div>
          <div class="lbl">Backend</div><div class="val">${escapeHtml(BACKEND)}</div>
<div class="lbl">Has meta</div><div class="val">${data?.exotics?.meta ? "yes" : "no"}</div>
          <div class="lbl">Has bets</div><div class="val">${data?.exotics?.bets ? "yes" : "no"}</div>
        </div>
      `;
    }

    pretty.classList.remove("hidden");
  }

  function runAnalyze(){
    if (!selected || !selected.fixture_id) return;
    els.analyzeRaw.textContent = "Analisi in corso...";

    fetch(`${BACKEND}/api/analyze?cb=${Date.now()}`, {
      method:"POST",
      headers:{ "Content-Type":"application/json" },
      body: JSON.stringify({ fixture_id: selected.fixture_id })
    })
    .then(res=>{
      if (!res.ok){
        return res.text().catch(()=> "").then(t=>{
          throw new Error(`analyze ${res.status} ${t}`);
        });
      }
      return res.json();
    })
    .then(data=>{
      window.lastAnalysis = data;
      els.analyzeRaw.textContent = JSON.stringify(data, null, 2);
      renderAnalysis(data);
    })
    .catch(e=>{
      console.error(e);
      els.analyzeRaw.textContent = "Errore analisi. Apri console.";
    });
  }

  // init
  els.dateInp.value = todayISO();
  els.searchInp.addEventListener("input", () => renderList());
  document.querySelectorAll("input.lg").forEach(chk => chk.addEventListener("change", () => renderList()));
  els.btnReload.addEventListener("click", () => loadFixtures());
  els.btnAnalyze.addEventListener("click", () => runAnalyze());

  ping().then(loadFixtures);
})();
</script>
</body>
</html>
